# Changelog
Описание

API по спецификации [JSON API(v1.0)](https://jsonapi.org/format/)

## [Unreleased]
### Added:
- Описание ошибок при выполнении методов; 

## [1.13.1] - 2022.03.17
### Added:
- добавлен метод DELETE /admin/v1/partners , реализована вся логика;
- добавлен метод DELETE /admin/v1/partner-users/{partner_user_id} , реализована вся логика;

### Changed:
- изменен метод POST /admin/v1/partners , реализована вся логика;
- изменен метод PATCH /admin/v1/partner-users/{partner_user_id} , реализована вся логика;

## [1.13.0] - 2022.03.12
### Added:
- добавлен фильтр /admin/v1/roles/?filter[allow_manual]=true||false ;

### Changed:
- изменен метод PATCH /admin/v1/users при изменении ролей, реализована вся логика;
- запрет на блокировку суперадмин пользователя;
- изменен метод POST /admin/v1/company-users , реализована вся логика;
- изменен метод PATCH /admin/v1/company-users/{company_user_id} , реализована вся логика;
- изменен метод DELETE /admin/v1/company-users/{company_user_id} , реализована вся логика;
- изменен метод PATCH /admin/v1/companies/{company_id} , реализована вся логика;

## [1.12.1] - 2022.03.11
### Changed:
- генерация нового кода при авторизации для партнера и админа;

## [1.12.0] - 2022.03.11
### Added:
- добавлен фильтр /users/?filter[roles][name]=value ;
- добавлен фильтр /roles/?filter[name]=value ;
- добавлены новые роли (customerAdmin, customerEmployee, partnerAdmin, partnerEmployee), которые привязывются к пользователям программно;

### Changed:
- /roles только на получение списка и получение конкретной роли;
- /abilities только на получение списка и получение конкретной роли;
- обновлена логика работы методов создания партнеров и компаний;

## [1.11.1] - 2022.03.09
### Changed:
- переделан метод авторизации по номеру телефона для фронт-админ /auth 
- переделан метод подтверждения номера телефона для фронт-админ /auth/{phone} 
- переделан метод "выход из системы" для фронт-админ /auth/logout

## [1.11.0] - 2022.03.07
### Added:
- Добавлен файл с миграцией с пользователем по умолчанию, ролями и правами;
- Переделан механизм авторизации в зависимости от роли пользователя;

## [1.10.0] - 2022.03.05
### Added:
- Добавлен файл с миграцией с пользователем по умолчанию, ролями и правами;

## [1.9.0] 28.02.2022
### Added:
- Partner api
- CRUD сотрудник

## [1.8.3] 28.02.2022
### Added:
- JsonApi server для партнера
- Company schema для партнёры

## [1.8.3] 27.02.2022
### Added:
- Создать компании с помощи телефон

## [1.8.2] 26.02.2022
### Added:
- Привязка роли и прав к пользователям

## [1.8.1] 18.02.2022
### Changed:
- Большое изменение в файловой структуре
- Создать пользователь в сервисе, а не в контроллере

## [1.8.0] 18.02.2022
### Added:
- Сотрудники партнёра. 
  - Список, редактирование, создание и удаление

## [1.7.0] 18.02.2022
### Added:
- Сотрудники компании. 
  - Список, редактирование, создание и удаление
  
## Changed: 
  - поля инфо в таблице компании и партнеры

## [1.6.0] 17.02.2022
### Added:
- Партнёры. 
  - Список, просмотр, создание, редактирование и удаление.
  - Блокировка
### Changed:
  - User request

## [1.5.0] 16.02.2022
### Added:
- Компании
  - Список, просмотр, создание, редактирование и удаление;
  - Блокировка;
## [1.4.0] 15.02.2022
### Added:
- Пользователи
  - Список, просмотр, создание, редактирование и удаление;
  - блокировка

## [1.3.0] 15.02.2022
### Added:
- Роли и права. 
   - Список, просмотр, создание, редактирование и удаление. 
   - Привязка прав к ролям

- Создать dto и сервис класс через командную консоль
  - `php artisan make:dto --folder={Admin, Partner or Customer}`
  - `php artisan make:service --folder={Admin, Partner or Customer}`

## [1.2.1]  12.02.2022
### Changed:
- Проверко в UserPolicy в метод update

## [1.2.0]  12.02.2022
### Added:
- Просмотр и редактирование своего профиля issue #2

## [1.1.0] 11.02.2022
- Авторизация(регистрация) по смс и выход из системы #1

## [1.0.3] 11.02.2022
### Added:
- Installed laravel-json-api/laravel

### Changed:
- gitignore


## [1.0.2] 09.02.2022
### Added:
- Laravel Ide-helper


## [1.0.1] 09.02.2022
### Added:
- Laravel sanctum
 

## [1.0.0] 09.02.2022
### Added:
- Installed laravel v8.6.3
